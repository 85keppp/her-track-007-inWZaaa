<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Period Tracker - Home</title>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
        
    <style>
        /* CSS ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ style.css ‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) */
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&display=swap');

        body {
            padding-top: 50px; 
            padding-bottom: 70px;
            margin: 0;
            font-family: 'Kanit', sans-serif;
            background-color: #d5e5f3; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏°‡∏°‡∏ï‡∏¥ */
            color: #333333;
            background-image: url(bg.jpg);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        .top-nav {
            position: fixed;
            top: 0;
            width: 100%;
            display: flex;
            justify-content: flex-start;
            background-color: #b0d3f2;
            border-bottom: 1px solid #b0d3f2;
            padding: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            z-index: 1000;
            gap: 20px;
        }
        .circle {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 250px;
            height: 250px;
            background: linear-gradient(180deg, #fb6a91cd, #b0d3f2c8); 
            border-radius: 50%;
            margin: 40px auto 30px;
            padding: 20px;
            color: white;
            text-align: center; 
        } 
        .circle.is-period {
            background: linear-gradient(180deg, #d6336c, #fb6a91);
        }

        .Period_in {
            font-size: 1.2em;
            margin-bottom: 5px;
            font-weight: 300;
        }
        .days {
            font-size: 3.5em;
            font-weight: bold;
            margin: 0;
        }
        .date {
            font-size: 1em;
            margin-top: 5px;
        }
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 0 20px;
            max-width: 400px;
            margin: 0 auto;
        }
        .start-btn {
            padding: 15px;
            background-color: #d6336c; 
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            font-family: 'Kanit';
        }
        .button-card {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .self-assessment {
            font-size: 1.1em;
            font-weight: bold;
            color: #d6336c;
            margin-bottom: 5px;
        }
        .self-assessment2 {
            font-size: 0.9em;
            color: #777;
            margin: 0;
        }
        .from-btn {
            display: block;
            text-align: center;
            padding: 10px;
            margin-top: 15px;
            background-color: #ffb6c1;
            color: #d6336c;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
        }
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 4px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        .bottom-nav a {
            color: #777;
            text-decoration: none;
            padding: 10px;
        }
        .bottom-nav .active {
            color: #d6336c;
            font-weight: bold;
        }
        /* --- Style ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Input ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô button-card --- */
        .button-card label {
            display: block;
            margin-top: 10px;
            font-weight: 600;
        }
        .button-card input[type="date"] {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ffccd9;
            border-radius: 5px;
            box-sizing: border-box;
            font-family: 'Kanit';
        }
        /* --- Style ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö div ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå (‡πÅ‡∏ó‡πá‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå) --- */
        #analysisResult {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff0f5; 
            border-radius: 8px;
            border: 1px solid #ffccd9;
            line-height: 1.6;
            font-size: 0.95em;
        }
        #analysisResult h4 {
            color: #d6336c;
            margin-top: 0;
            border-bottom: 1px solid #ffccd9;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        /* --- Style ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Navigation (‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå calen.html ‡πÄ‡∏î‡∏¥‡∏°) --- */

    </style>
</head>
<body>

    <nav class="top-nav">
        <img src="logo.jpg" width="90" alt="Her track logo" style="margin: 5px 20px 5px 20px;" >
    </nav>
        
    <div class="circle">
        <p class="Period_in">‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å</p>
        <h3 class="days">... ‡∏ß‡∏±‡∏ô</h3>
        <p class="date">‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏° ...</p>
    </div>

    <div class="button-group">
        <div class="button-card">
            <p class="self-assessment">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•)</p>
            
            <label for="lastStart">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</label>
            <input type="date" id="lastStart" value="2025-10-01"> 
            
            <label for="lastEnd">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏£‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</label>
            <input type="date" id="lastEnd" value="2025-10-05">
            
            <label for="prevStart">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤:</label>
            <input type="date" id="prevStart" value="2025-09-17"> 
            
            <button onclick="updatePeriodInfo()" class="start-btn" style="margin-top: 15px;">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì & ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            
            <div id="analysisResult">
                </div>
            
        </div>

        <div class="button-card">
            <p class="self-assessment" style="color: #6c7d9c;">üìÖ ‡∏î‡∏π‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô </p>
            <p class="self-assessment2">‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 5 ‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏ß‡∏±‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</p>
            
            <a href="calendar.html" class="from-btn">‡∏î‡∏π‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô</a> 
        </div>
        <div class="button-card">
            <p class="self-assessment" style="color: #6c7d9c;" >üìù‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</p>
            <p class="self-assessment2">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô! ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏û‡∏ó‡∏¢‡πå</p>
            
            <a href="dashboard.html" class="from-btn">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</a> 
        </div>
    </div>


    <script>
        // ‡πÇ‡∏Ñ‡πâ‡∏î JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Local Storage
        const thaiMonths = [
            "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå", "‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°", "‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô", "‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô",
            "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°", "‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô", "‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°", "‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô", "‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"
        ];

        function formatThaiDate(date) {
            const d = date.getDate();
            const m = thaiMonths[date.getMonth()];
            const y = date.getFullYear() + 543; 
            return `${d} ${m} ${y}`;
        }

        function updatePeriodInfo() {
            const oneDay = 1000 * 60 * 60 * 24;
            const today = new Date();
            today.setHours(0, 0, 0, 0); 

            // 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Input
            const lastStartDateStr = document.getElementById("lastStart").value;
            const lastEndDateStr = document.getElementById("lastEnd").value;
            const prevStartDateStr = document.getElementById("prevStart").value;
            const analysisResultDiv = document.getElementById("analysisResult");
            const circleDiv = document.querySelector(".circle"); 

            if (!lastStartDateStr || !lastEndDateStr || !prevStartDateStr) {
                document.querySelector(".days").textContent = "N/A";
                document.querySelector(".date").textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
                analysisResultDiv.innerHTML = ``; 
                circleDiv.classList.remove('is-period');
                // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå Local Storage ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
                localStorage.removeItem('lastStart');
                return;
            }

            const lastStart = new Date(lastStartDateStr);
            const lastEnd = new Date(lastEndDateStr);
            const prevStart = new Date(prevStartDateStr);

            // 2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
            const periodDays = Math.floor((lastEnd - lastStart) / oneDay) + 1;
            const cycleDays = Math.floor((lastStart - prevStart) / oneDay);
            
            if (cycleDays <= 0 || periodDays <= 0) {
                const errorMsg = `<h3>‚ö†Ô∏è ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏™‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</h3>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á`;
                document.querySelector(".days").textContent = "‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î";
                document.querySelector(".date").textContent = "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà";
                analysisResultDiv.innerHTML = `<span style="color: red;">${errorMsg}</span>`;
                circleDiv.classList.remove('is-period');
                localStorage.removeItem('lastStart');
                return;
            }

            // 3. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Next Period ‡πÅ‡∏•‡∏∞ Ovulation ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
            let nextPeriodDate = new Date(lastStart);
            nextPeriodDate.setDate(nextPeriodDate.getDate() + cycleDays);
            
            const isDuringPeriod = (today >= lastStart && today <= lastEnd);
            
            if (isDuringPeriod) {
                // ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏≠‡∏¢‡∏π‡πà
                const periodDayNumber = Math.floor((today - lastStart) / oneDay) + 1;
                document.querySelector(".Period_in").textContent = `‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô`;
                document.querySelector(".days").textContent = `‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô`;
                document.querySelector(".date").textContent = `‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${periodDayNumber} ‡∏à‡∏≤‡∏Å ${periodDays} ‡∏ß‡∏±‡∏ô`;
                circleDiv.classList.add('is-period'); 
                
                // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Local Storage ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏°‡∏ô
                while (nextPeriodDate < today) {
                    nextPeriodDate.setDate(nextPeriodDate.getDate() + cycleDays);
                }
            } else {
                // ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
                while (nextPeriodDate < today) {
                    nextPeriodDate.setDate(nextPeriodDate.getDate() + cycleDays);
                }
                
                const daysUntil = Math.floor((nextPeriodDate - today) / oneDay);
                
                document.querySelector(".Period_in").textContent = `‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å`;
                document.querySelector(".days").textContent = `${daysUntil} ‡∏ß‡∏±‡∏ô`;
                document.querySelector(".date").textContent = `‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${formatThaiDate(nextPeriodDate)}`;
                circleDiv.classList.remove('is-period');
            }
            
            // üåü ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å‡∏•‡∏á Local Storage üåü
            localStorage.setItem('lastStart', lastStartDateStr);
            localStorage.setItem('lastEnd', lastEndDateStr);
            localStorage.setItem('prevStart', prevStartDateStr);
            localStorage.setItem('periodDays', periodDays); 
            localStorage.setItem('cycleDays', cycleDays); 
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô)
            localStorage.setItem('nextPeriodDate', nextPeriodDate.toISOString().split('T')[0]);

            // 4. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏ï‡∏Å‡πÑ‡∏Ç‡πà‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
            const ovulation = new Date(nextPeriodDate);
            ovulation.setDate(ovulation.getDate() - 14); 
            const fertileStart = new Date(ovulation);
            fertileStart.setDate(fertileStart.getDate() - 5);
            const fertileEnd = new Date(ovulation); 

            // 5. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
            let cycleStatus = (21 <= cycleDays && cycleDays <= 35) ? "‚úÖ ‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (21-35 ‡∏ß‡∏±‡∏ô)" : 
                              (cycleDays < 21) ? "‚ö†Ô∏è ‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏™‡∏±‡πâ‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ (< 21 ‡∏ß‡∏±‡∏ô)" : "‚ö†Ô∏è ‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏¢‡∏≤‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ (> 35 ‡∏ß‡∏±‡∏ô)";

            let periodStatus = (3 <= periodDays && periodDays <= 7) ? "‚úÖ ‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ (3-7 ‡∏ß‡∏±‡∏ô)" : 
                               (periodDays < 3) ? "‚ö†Ô∏è ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏°‡∏≤‡∏™‡∏±‡πâ‡∏ô‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ (< 3 ‡∏ß‡∏±‡∏ô)" : "‚ö†Ô∏è ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏°‡∏≤‡∏ô‡∏≤‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ (> 7 ‡∏ß‡∏±‡∏ô)";

            analysisResultDiv.innerHTML = `
                <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h4>
                üîπ **‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏¢‡∏≤‡∏ß**: ${cycleDays} ‡∏ß‡∏±‡∏ô (${cycleStatus})<br>
                üîπ **‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô**: ${periodDays} ‡∏ß‡∏±‡∏ô (${periodStatus})<br>
                ---<br>
                üîπ **‡∏ß‡∏±‡∏ô‡∏ï‡∏Å‡πÑ‡∏Ç‡πà‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì**: ${formatThaiDate(ovulation)}<br>
                üîπ **‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå**: ${formatThaiDate(fertileStart)} ‡∏ñ‡∏∂‡∏á ${formatThaiDate(fertileEnd)}
            `;
        }

        // FUNCTION: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        function goToCalendar() {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
            if (localStorage.getItem('lastStart')) {
                // üåü ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏ó‡∏µ‡πà calendar.html üåü
                window.location.href = 'calendar.html'; 
            } else {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏î "‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì & ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" ‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏π‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô');
            }
        }

        // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å updatePeriodInfo() ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        window.onload = function() {
            updatePeriodInfo();
        };

    </script>
</body>
</html>